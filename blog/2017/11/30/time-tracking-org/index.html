<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Time tracking in Emacs with org-clock - fdavidcl</title>
    <link rel="stylesheet" href="/assets/stylesheets/normalize.css">
    <link rel="stylesheet" href="/assets/stylesheets/default.css">
  </head>
  <body>
    <div class="wrapper">
      <aside class="top">
        <div class="top-content">
          <header>
            <a class="name-box" href="/">
              
              <img src="https://secure.gravatar.com/avatar/7083d161b041964b75c38376d9dee37a?s=200" class="profile-pic" />
              
              <span class="name">
                David Charte
              </span>
            </a>
          </header>
          <nav class="sections">
              <a href="/" class="section-link">about</a>
              <a href="/blog" class="section-link">blog</a>
          </nav>
        </div>
      </aside>
      <div class="main">
        <div class="main-content">
          
<article class="article lang-es">
  <datetime class="date">30-11-2017</datetime>
  
  <a href="/blog/2017/11/30/time-tracking-org/">
    <h1>
        Time tracking in Emacs with org-clock
        </h1>
  </a>
  

  
  <p>This is yet another short post about a little feature in Emacs that turned out to be pretty useful. If you ever feel that you’d like to know how much time you are spending working on different projects (and are an Emacs user), this is the post for you.</p>

<h2 id="org-clock">org-clock</h2>

<p>After searching for a simple app to track my time for an hour or so, I ended up looking for that functionality in Emacs and, <a href="https://www.xkcd.com/378/">unsurprisingly enough</a>, it exists. It’s integrated inside <em>org-mode</em> so it works very well with any task list you may already have, or you could create a completely separate file exclusive for time tracking.</p>

<p>The following is the skeleton for my time log:</p>

<pre><code class="language-org">#+title: Time log

=CHEATSHEET=
- S-c         open this window (i3)
- C-c C-x C-i org-clock-in
- C-c C-x C-o org-clock-out
- C-c C-x C-j org-clock-goto
- C-c C-x C-d org-clock-display
- C-c C-x C-r org-clock-report

* Work
* M.Sc.
* Projects / Fun
</code></pre>

<p>Easy enough, the only actual content of the file is that last stack of headers (it could be a list with <code class="highlighter-rouge">-</code> instead of <code class="highlighter-rouge">*</code> as well). Now onto the good part: place the cursor over one of the tasks and type <kbd>Ctrl + c</kbd>,<kbd>Ctrl + x</kbd>,<kbd>Ctrl + i</kbd>. This will set a clock under that task with the starting time of the task. Let some time pass, and use <kbd>Ctrl + c</kbd>,<kbd>Ctrl + x</kbd>,<kbd>Ctrl + o</kbd> to stop the clock. Emacs will also remember when you have a clock running, and will warn you if you try to close the buffer or stop the clock if you start another one.</p>

<p>When you have tracked several time periods for the same task, you can compute the total time with <kbd>Ctrl + c</kbd>,<kbd>Ctrl + x</kbd>,<kbd>Ctrl + d</kbd>. <em>org-clock</em> also understands nested tasks (second-level headers, nested lists, etc.) and will sum the time of all the tasks inside a higher-level task to compute the overall spent time. You can generate a daily report with <kbd>Ctrl + c</kbd>,<kbd>Ctrl + x</kbd>,<kbd>Ctrl + r</kbd> and setting the <code class="highlighter-rouge">:block today</code> parameter. The following screenshot shows all these features at work:</p>

<p><img src="/assets/images/emacs-org-clock.png" alt="Screenshot of my time log" /></p>

<h2 id="convenient-stuff">Convenient stuff</h2>

<p>As a user of i3, it’s easy to set keybindings that will let me access my time log instantly:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># .config/i3/config</span>
bindsym <span class="nv">$mod</span>+c <span class="nb">exec</span> <span class="s2">"xdotool search --name 'timelog.org' windowactivate &amp;&amp; i3-msg kill || emacsclient -c /media/datos/Documents/timelog.org"</span>
for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Emacs"</span> <span class="nv">title</span><span class="o">=</span><span class="s2">"timelog.org"</span><span class="o">]</span> floating <span class="nb">enable
</span>for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Emacs"</span> <span class="nv">title</span><span class="o">=</span><span class="s2">"timelog.org"</span><span class="o">]</span> resize <span class="nb">set </span>1920 1280
for_window <span class="o">[</span><span class="nv">class</span><span class="o">=</span><span class="s2">"Emacs"</span> <span class="nv">title</span><span class="o">=</span><span class="s2">"timelog.org"</span><span class="o">]</span> move position center
</code></pre></div></div>

<p>This enables a <kbd>Super + c</kbd> binding that will toggle an Emacs window with the time log file.</p>

<p>In order to save some keystrokes and prevent forgetting to save the time log, I have also added these hooks into my Emacs config:</p>

<pre><code class="language-lisp">(add-hook 'org-clock-in-hook 'save-buffer)
(add-hook 'org-clock-out-hook 'save-buffer)
</code></pre>

<p>Finally, I let Emacs open the file in background at startup with the following line in the configuration, so the buffer isn’t actually closed when I close the window:</p>

<pre><code class="language-lisp">(find-file-noselect "~/Documentos/timelog.org")
</code></pre>

<p>And that’s all there is to simply time tracking in Emacs. I hope you learned something useful and I didn’t waste your time.</p>

  

  <div class="tags">
    
    <a href="/tag/emacs">emacs</a>
    
    <a href="/tag/linux">linux</a>
    
    <a href="/tag/code">code</a>
    
  </div>
</article>


<footer>
  <div class="license">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">
      <i class="icon icon-cc"></i
      ><i class="icon icon-cc-by"></i
      ><i class="icon icon-cc-sa"></i>
    </a>
  </div>
</footer>


        </div>
      </div>
    </div>
    <link href='https://fonts.googleapis.com/css?family=Source Sans Pro:300,400,400i,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
    <!--link href="//maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet" /-->
    <link rel="stylesheet" href="/assets/fonts/css/icons.css">
    <link rel="stylesheet" href="/assets/stylesheets/highlight-friendly.css">
  </body>
</html>
